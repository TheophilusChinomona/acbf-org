import{j as e,m as s}from"./ui-vendor-D2jIcmjW.js";import{h as a,c as t,a as i}from"./react-vendor-C9V0vZuX.js";import{T as r,B as l,h as n,w as m,i as d,N as c,an as o,aG as x,ah as h,a3 as b,u,r as p,t as j,U as g,x as N,_ as y}from"./index-sZWzWtYr.js";import{S as f,C as v}from"./SEO-FeRLgWmQ.js";import{S as w}from"./Section-B5vjyEy3.js";import{u as S,S as k}from"./StatusBadge-DNiN_VQA.js";import{f as A}from"./format-DThRb344.js";import"./form-vendor-DygO8_bV.js";function C(){const{type:C,id:D}=a(),F=t(),{contactSubmissions:M,membershipApplications:P,awardsNominations:_,updateContactSubmissionStatus:B,updateMembershipApplicationStatus:I,updateAwardsNominationStatus:T,getContactSubmission:z,getMembershipApplication:E,getAwardsNomination:U,deleteContactSubmission:R,deleteMembershipApplication:$,deleteAwardsNomination:H}=S(),[K,O]=i.useState(null),[Y,q]=i.useState(""),[G,V]=i.useState(!1),[J,L]=i.useState(null),[Q,W]=i.useState(""),[X,Z]=i.useState(!1),[ee,se]=i.useState(!1);i.useEffect(()=>{if("contact"===C){const e=z(D);e&&(O(e),""!==Y&&Y!==e.status||q(e.status||"new"))}else if("membership"===C){const e=E(D);e&&(O(e),""!==Y&&Y!==e.status||q(e.status||"pending"))}else if("awards"===C){const e=U(D);e&&(O(e),""!==Y&&Y!==e.status||q(e.status||"pending"))}},[C,D,M,P,_,z,E,U]);const ae=e=>{if(!e)return"N/A";try{const s=e instanceof Date?e:e.toDate?e.toDate():new Date(e);return A(s,"MMMM dd, yyyy 'at' HH:mm")}catch(s){return"Invalid date"}};return K?e.jsxs(e.Fragment,{children:[e.jsx(f,{title:("contact"===C?"Contact Submission":"membership"===C?"Membership Application":"Awards Nomination")+" Details",description:"View details for "+("contact"===C?"contact submission":"membership"===C?"membership application":"awards nomination"),noindex:!0}),e.jsx("section",{className:"relative w-full overflow-hidden bg-gradient-to-br from-secondary-dark via-secondary to-secondary-light py-8 md:py-12",children:e.jsx(v,{children:e.jsx("div",{className:"relative z-10",children:e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsxs(l,{onClick:()=>F("/admin"),variant:"ghost",className:"mb-4 text-white hover:bg-white/20",children:[e.jsx(n,{className:"mr-2"}),"Back to Dashboard"]}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:["contact"===C?e.jsx(m,{className:"w-8 h-8 text-white"}):"membership"===C?e.jsx(d,{className:"w-8 h-8 text-white"}):e.jsx(c,{className:"w-8 h-8 text-white"}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white",children:"contact"===C?"Contact Submission":"membership"===C?"Membership Application":"Awards Nomination"})]}),e.jsxs("p",{className:"text-white/90",children:["Submitted on ",ae("awards"===C?K.submittedAt:K.created_at)]})]})})})}),e.jsx(w,{bgColor:"white",padding:"xl",children:e.jsx(v,{children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Update Status"}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("span",{className:"text-sm text-gray-600 whitespace-nowrap",children:"Current status:"}),e.jsx(k,{status:K.status})]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("select",{value:Y,onChange:e=>q(e.target.value),disabled:G,className:"px-4 py-2 min-w-[140px] border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed bg-white text-sm font-medium",children:("contact"===C?[{value:"new",label:"New"},{value:"in-progress",label:"In Progress"},{value:"resolved",label:"Resolved"}]:"membership"===C||"awards"===C?[{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"}]:[]).map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx(l,{onClick:async()=>{if(!K)return L("error"),void W("Submission not found. Please refresh the page.");if(!Y)return L("error"),void W("Please select a status.");if(Y!==K.status){V(!0),L(null),W("");try{"contact"===C?await B(D,Y):"membership"===C?await I(D,Y):"awards"===C&&await T(D,Y),L("success"),W("Status updated successfully!"),O({...K,status:Y}),setTimeout(()=>{L(null),W("")},3e3)}catch(e){L("error"),W(e.message||"Failed to update status. Please try again.")}finally{V(!1)}}},disabled:G||!K||!Y||Y===K.status,variant:"primary",children:G?e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"animate-spin mr-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"mr-2"}),"Update Status"]})}),e.jsxs(l,{onClick:()=>Z(!0),disabled:ee||!K,variant:"outline",className:"border-red-500 text-red-600 hover:bg-red-50",children:[e.jsx(h,{className:"mr-2"}),"Delete"]})]})]}),"success"===J&&e.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-start gap-3",children:[e.jsx(b,{className:"text-green-600 text-xl flex-shrink-0 mt-0.5"}),e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium text-green-900",children:Q})})]}),"error"===J&&e.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[e.jsx(r,{className:"text-red-600 text-xl flex-shrink-0 mt-0.5"}),e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium text-red-900",children:Q})})]})]}),e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},className:"bg-white rounded-lg border border-gray-200 p-6 space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"awards"===C?"Nomination Details":"Submission Details"}),"awards"===C?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(c,{className:"inline mr-2"}),"Award Category"]}),e.jsx("p",{className:"text-gray-900 font-medium",children:K.category||"N/A"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(u,{className:"inline mr-2"}),"Nomination Year"]}),e.jsx("p",{className:"text-gray-900",children:K.nominationYear||"N/A"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Nominee Information"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(p,{className:"inline mr-2"}),"Company Name"]}),e.jsx("p",{className:"text-gray-900 font-medium",children:K.nominee?.organization||"N/A"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Nominator Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(j,{className:"inline mr-2"}),"Full Name"]}),e.jsx("p",{className:"text-gray-900",children:K.nominator?.fullName||"N/A"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(m,{className:"inline mr-2"}),"Email"]}),e.jsx("a",{href:`mailto:${K.nominator?.email}`,className:"text-primary hover:text-secondary hover:underline",children:K.nominator?.email||"N/A"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(p,{className:"inline mr-2"}),"Organization"]}),e.jsx("p",{className:"text-gray-900",children:K.nominator?.organization||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Relationship to Nominee"}),e.jsx("p",{className:"text-gray-900",children:K.nominator?.relationship||"N/A"})]})]})]}),K.supportingStatement&&e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(g,{className:"inline mr-2"}),"Supporting Statement"]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:K.supportingStatement})})]}),K.achievements&&e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(b,{className:"inline mr-2"}),"Key Achievements & Contributions"]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:K.achievements})})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx(u,{className:"inline mr-2"}),"Submitted on ",ae(K.submittedAt)]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(j,{className:"inline mr-2"}),"Name"]}),e.jsx("p",{className:"text-gray-900",children:K.name||"N/A"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(m,{className:"inline mr-2"}),"Email"]}),e.jsx("a",{href:`mailto:${K.email}`,className:"text-primary hover:text-secondary hover:underline",children:K.email||"N/A"})]}),"membership"===C&&K.phone&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(N,{className:"inline mr-2"}),"Phone"]}),e.jsx("a",{href:`tel:${K.phone}`,className:"text-primary hover:text-secondary hover:underline",children:K.phone})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(u,{className:"inline mr-2"}),"Submitted"]}),e.jsx("p",{className:"text-gray-900",children:ae(K.created_at)})]}),"membership"===C&&K.business_name&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(p,{className:"inline mr-2"}),"Business Name"]}),e.jsx("p",{className:"text-gray-900",children:K.business_name})]}),"membership"===C&&K.business_type&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Type"}),e.jsx("p",{className:"text-gray-900",children:K.business_type})]}),"contact"===C&&K.subject&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),e.jsx("p",{className:"text-gray-900",children:K.subject})]})]}),(K.message||"contact"===C&&K.subject)&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(g,{className:"inline mr-2"}),"contact"===C?"Message":"Additional Information"]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:K.message||"No message provided"})})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Submission ID: ",e.jsx("span",{className:"font-mono",children:K.id})]})})]})]})})}),X&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(s.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx(r,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Submission"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone"})]})]}),e.jsxs("p",{className:"text-gray-700 mb-6",children:["Are you sure you want to delete this"," ","contact"===C?"contact submission":"membership"===C?"membership application":"awards nomination","? All associated data will be permanently removed from the system."]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(l,{onClick:()=>Z(!1),disabled:ee,variant:"outline",children:"Cancel"}),e.jsx(l,{onClick:async()=>{if(K){se(!0);try{"contact"===C?(await R(D),y.success("Contact submission deleted successfully"),F("/admin")):"membership"===C?(await $(D),y.success("Membership application deleted successfully"),F("/admin")):"awards"===C&&(await H(D),y.success("Awards nomination deleted successfully"),F("/admin"))}catch(e){y.error(e.message||"Failed to delete submission. Please try again."),se(!1),Z(!1)}}else y.error("Submission not found")},disabled:ee,className:"bg-red-600 hover:bg-red-700 text-white",children:ee?e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"animate-spin mr-2"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"mr-2"}),"Delete Permanently"]})})]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(f,{title:"Submission Not Found",description:"The requested submission could not be found",noindex:!0}),e.jsx(w,{bgColor:"white",padding:"xl",children:e.jsx(v,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(r,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Submission Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The submission you're looking for doesn't exist or has been removed."}),e.jsxs(l,{onClick:()=>F("/admin"),variant:"primary",children:[e.jsx(n,{className:"mr-2"}),"Back to Dashboard"]})]})})})]})}export{C as default};
