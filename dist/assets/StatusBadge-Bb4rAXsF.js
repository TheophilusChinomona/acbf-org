import{a as e}from"./react-vendor-C9V0vZuX.js";import{aq as t,Y as a,Z as o,av as r,as as s,a4 as n,a7 as i,W as c}from"./index-CCEhIy-z.js";import{j as l}from"./ui-vendor-D2jIcmjW.js";function d(){const[l,d]=e.useState([]),[b,p]=e.useState([]),[u,m]=e.useState(!0),[h,g]=e.useState(null),[C,w]=e.useState(!1),[f,v]=e.useState(!1);e.useEffect(()=>{C&&f&&m(!1)},[C,f]),e.useEffect(()=>{try{const e=t(a(o,"contact_submissions"),r("created_at","desc")),n=s(e,e=>{const t=e.docs.map(e=>({id:e.id,...e.data(),created_at:e.data().created_at?.toDate?e.data().created_at.toDate():e.data().created_at}));d(t),w(!0),g(null)},e=>{g(e.message||"Failed to fetch contact submissions"),w(!0)});return()=>n()}catch(e){g(e.message||"Failed to set up contact submissions listener"),w(!0)}},[]),e.useEffect(()=>{try{const e=t(a(o,"membership_applications"),r("created_at","desc")),n=s(e,e=>{const t=e.docs.map(e=>({id:e.id,...e.data(),created_at:e.data().created_at?.toDate?e.data().created_at.toDate():e.data().created_at}));p(t),v(!0),g(null)},e=>{g(e.message||"Failed to fetch membership applications"),v(!0)});return()=>n()}catch(e){g(e.message||"Failed to set up membership applications listener"),v(!0)}},[]);return{contactSubmissions:l,membershipApplications:b,loading:u,error:h,updateContactSubmissionStatus:async(e,t)=>{try{const a=["new","in-progress","resolved"];if(!a.includes(t))throw new Error(`Invalid status. Must be one of: ${a.join(", ")}`);const r=n(o,"contact_submissions",e);await i(r,{status:t})}catch(a){throw a}},updateMembershipApplicationStatus:async(e,t)=>{try{const a=["pending","approved","rejected"];if(!a.includes(t))throw new Error(`Invalid status. Must be one of: ${a.join(", ")}`);const r=n(o,"membership_applications",e);await i(r,{status:t})}catch(a){throw a}},getContactSubmission:e=>l.find(t=>t.id===e)||null,getMembershipApplication:e=>b.find(t=>t.id===e)||null,archiveContactSubmission:async e=>{try{const t=n(o,"contact_submissions",e);await i(t,{archived:!0,archived_at:c()})}catch(t){throw t}},unarchiveContactSubmission:async e=>{try{const t=n(o,"contact_submissions",e);await i(t,{archived:!1,archived_at:null})}catch(t){throw t}},archiveMembershipApplication:async e=>{try{const t=n(o,"membership_applications",e);await i(t,{archived:!0,archived_at:c()})}catch(t){throw t}},unarchiveMembershipApplication:async e=>{try{const t=n(o,"membership_applications",e);await i(t,{archived:!1,archived_at:null})}catch(t){throw t}}}}function b({status:e,className:t=""}){const a={new:{label:"New",bgColor:"bg-blue-100",textColor:"text-blue-800",borderColor:"border-blue-200"},"in-progress":{label:"In Progress",bgColor:"bg-yellow-100",textColor:"text-yellow-800",borderColor:"border-yellow-200"},resolved:{label:"Resolved",bgColor:"bg-green-100",textColor:"text-green-800",borderColor:"border-green-200"},pending:{label:"Pending",bgColor:"bg-orange-100",textColor:"text-orange-800",borderColor:"border-orange-200"},approved:{label:"Approved",bgColor:"bg-green-100",textColor:"text-green-800",borderColor:"border-green-200"},rejected:{label:"Rejected",bgColor:"bg-red-100",textColor:"text-red-800",borderColor:"border-red-200"}}[e]||{label:e||"Unknown",bgColor:"bg-gray-100",textColor:"text-gray-800",borderColor:"border-gray-200"};return l.jsx("span",{className:`\n        inline-flex items-center justify-center px-3 py-1 rounded-full text-sm font-medium\n        border ${a.borderColor}\n        ${a.bgColor} ${a.textColor}\n        whitespace-nowrap\n        ${t}\n      `.trim().replace(/\s+/g," "),children:a.label})}export{b as S,d as u};
