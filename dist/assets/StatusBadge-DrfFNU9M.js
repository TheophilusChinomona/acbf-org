import{a as t}from"./react-vendor-C9V0vZuX.js";import{au as e,Y as a,Z as s,az as r,aw as o,a5 as n,aH as i,a8 as c,W as d}from"./index-LZoYdwKt.js";import{j as l}from"./ui-vendor-D2jIcmjW.js";function u(){const[l,u]=t.useState([]),[h,m]=t.useState([]),[p,b]=t.useState([]),[w,g]=t.useState(!0),[y,f]=t.useState(null),[_,v]=t.useState(!1),[C,x]=t.useState(!1),[A,S]=t.useState(!1);t.useEffect(()=>{_&&C&&A&&g(!1)},[_,C,A]),t.useEffect(()=>{try{const t=e(a(s,"contact_submissions"),r("created_at","desc")),n=o(t,t=>{const e=t.docs.map(t=>({id:t.id,...t.data(),created_at:t.data().created_at?.toDate?t.data().created_at.toDate():t.data().created_at}));u(e),v(!0),f(null)},t=>{f(t.message||"Failed to fetch contact submissions"),v(!0)});return()=>n()}catch(t){f(t.message||"Failed to set up contact submissions listener"),v(!0)}},[]),t.useEffect(()=>{try{const t=e(a(s,"membership_applications"),r("created_at","desc")),n=o(t,t=>{const e=t.docs.map(t=>({id:t.id,...t.data(),created_at:t.data().created_at?.toDate?t.data().created_at.toDate():t.data().created_at}));m(e),x(!0),f(null)},t=>{f(t.message||"Failed to fetch membership applications"),x(!0)});return()=>n()}catch(t){f(t.message||"Failed to set up membership applications listener"),x(!0)}},[]),t.useEffect(()=>{try{const t=e(a(s,"awards_nominations"),r("submittedAt","desc")),n=o(t,t=>{const e=t.docs.map(t=>({id:t.id,...t.data(),submittedAt:t.data().submittedAt?.toDate?t.data().submittedAt.toDate():t.data().submittedAt,archived_at:t.data().archived_at?.toDate?t.data().archived_at.toDate():t.data().archived_at}));b(e),S(!0),f(null)},t=>{f(t.message||"Failed to fetch awards nominations"),S(!0)});return()=>n()}catch(t){f(t.message||"Failed to set up awards nominations listener"),S(!0)}},[]);const j=async t=>{try{const e=n(s,"contact_submissions",t);await i(e)}catch(e){throw e}},D=async t=>{try{const e=n(s,"membership_applications",t);await i(e)}catch(e){throw e}},N=async t=>{try{const e=n(s,"awards_nominations",t);await i(e)}catch(e){throw e}};return{contactSubmissions:l,membershipApplications:h,awardsNominations:p,loading:w,error:y,updateContactSubmissionStatus:async(t,e)=>{try{const a=["new","in-progress","resolved"];if(!a.includes(e))throw new Error(`Invalid status. Must be one of: ${a.join(", ")}`);const r=n(s,"contact_submissions",t);await c(r,{status:e})}catch(a){throw a}},updateMembershipApplicationStatus:async(t,e)=>{try{const a=["pending","approved","rejected"];if(!a.includes(e))throw new Error(`Invalid status. Must be one of: ${a.join(", ")}`);const r=n(s,"membership_applications",t);await c(r,{status:e})}catch(a){throw a}},updateAwardsNominationStatus:async(t,e)=>{try{const a=["pending","approved","rejected"];if(!a.includes(e))throw new Error(`Invalid status. Must be one of: ${a.join(", ")}`);const r=n(s,"awards_nominations",t);await c(r,{status:e})}catch(a){throw a}},getContactSubmission:t=>l.find(e=>e.id===t)||null,getMembershipApplication:t=>h.find(e=>e.id===t)||null,getAwardsNomination:t=>p.find(e=>e.id===t)||null,archiveContactSubmission:async t=>{try{const e=n(s,"contact_submissions",t);await c(e,{archived:!0,archived_at:d()})}catch(e){throw e}},unarchiveContactSubmission:async t=>{try{const e=n(s,"contact_submissions",t);await c(e,{archived:!1,archived_at:null})}catch(e){throw e}},archiveMembershipApplication:async t=>{try{const e=n(s,"membership_applications",t);await c(e,{archived:!0,archived_at:d()})}catch(e){throw e}},unarchiveMembershipApplication:async t=>{try{const e=n(s,"membership_applications",t);await c(e,{archived:!1,archived_at:null})}catch(e){throw e}},archiveAwardsNomination:async t=>{try{const e=n(s,"awards_nominations",t);await c(e,{archived:!0,archived_at:d()})}catch(e){throw e}},unarchiveAwardsNomination:async t=>{try{const e=n(s,"awards_nominations",t);await c(e,{archived:!1,archived_at:null})}catch(e){throw e}},deleteContactSubmission:j,deleteMembershipApplication:D,deleteAwardsNomination:N,batchDeleteContactSubmissions:async t=>{const e={success:0,failed:0,errors:[]};for(const s of t)try{await j(s),e.success++}catch(a){e.failed++,e.errors.push({id:s,error:a.message})}return e},batchDeleteMembershipApplications:async t=>{const e={success:0,failed:0,errors:[]};for(const s of t)try{await D(s),e.success++}catch(a){e.failed++,e.errors.push({id:s,error:a.message})}return e},batchDeleteAwardsNominations:async t=>{const e={success:0,failed:0,errors:[]};for(const s of t)try{await N(s),e.success++}catch(a){e.failed++,e.errors.push({id:s,error:a.message})}return e}}}function h({status:t,className:e=""}){const a={new:{label:"New",bgColor:"bg-primary-light",textColor:"text-secondary",borderColor:"border-primary-light"},"in-progress":{label:"In Progress",bgColor:"bg-yellow-100",textColor:"text-yellow-800",borderColor:"border-yellow-200"},resolved:{label:"Resolved",bgColor:"bg-green-100",textColor:"text-green-800",borderColor:"border-green-200"},pending:{label:"Pending",bgColor:"bg-orange-100",textColor:"text-orange-800",borderColor:"border-orange-200"},approved:{label:"Approved",bgColor:"bg-green-100",textColor:"text-green-800",borderColor:"border-green-200"},rejected:{label:"Rejected",bgColor:"bg-red-100",textColor:"text-red-800",borderColor:"border-red-200"}}[t]||{label:t||"Unknown",bgColor:"bg-gray-100",textColor:"text-gray-800",borderColor:"border-gray-200"};return l.jsx("span",{className:`\n        inline-flex items-center justify-center px-3 py-1 rounded-full text-sm font-medium\n        border ${a.borderColor}\n        ${a.bgColor} ${a.textColor}\n        whitespace-nowrap\n        ${e}\n      `.trim().replace(/\s+/g," "),children:a.label})}export{h as S,u};
