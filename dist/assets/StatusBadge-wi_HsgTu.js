import{a as t}from"./react-vendor-C9V0vZuX.js";import{as as a,Y as e,Z as o,ax as r,au as s,a4 as n,a7 as i,W as c}from"./index-Botb_OAu.js";import{j as d}from"./ui-vendor-D2jIcmjW.js";function l(){const[d,l]=t.useState([]),[u,b]=t.useState([]),[m,p]=t.useState([]),[h,g]=t.useState(!0),[w,v]=t.useState(null),[y,_]=t.useState(!1),[f,C]=t.useState(!1),[x,S]=t.useState(!1);t.useEffect(()=>{y&&f&&x&&g(!1)},[y,f,x]),t.useEffect(()=>{try{const t=a(e(o,"contact_submissions"),r("created_at","desc")),n=s(t,t=>{const a=t.docs.map(t=>({id:t.id,...t.data(),created_at:t.data().created_at?.toDate?t.data().created_at.toDate():t.data().created_at}));l(a),_(!0),v(null)},t=>{v(t.message||"Failed to fetch contact submissions"),_(!0)});return()=>n()}catch(t){v(t.message||"Failed to set up contact submissions listener"),_(!0)}},[]),t.useEffect(()=>{try{const t=a(e(o,"membership_applications"),r("created_at","desc")),n=s(t,t=>{const a=t.docs.map(t=>({id:t.id,...t.data(),created_at:t.data().created_at?.toDate?t.data().created_at.toDate():t.data().created_at}));b(a),C(!0),v(null)},t=>{v(t.message||"Failed to fetch membership applications"),C(!0)});return()=>n()}catch(t){v(t.message||"Failed to set up membership applications listener"),C(!0)}},[]),t.useEffect(()=>{try{const t=a(e(o,"awards_nominations"),r("submittedAt","desc")),n=s(t,t=>{const a=t.docs.map(t=>({id:t.id,...t.data(),submittedAt:t.data().submittedAt?.toDate?t.data().submittedAt.toDate():t.data().submittedAt,archived_at:t.data().archived_at?.toDate?t.data().archived_at.toDate():t.data().archived_at}));p(a),S(!0),v(null)},t=>{v(t.message||"Failed to fetch awards nominations"),S(!0)});return()=>n()}catch(t){v(t.message||"Failed to set up awards nominations listener"),S(!0)}},[]);return{contactSubmissions:d,membershipApplications:u,awardsNominations:m,loading:h,error:w,updateContactSubmissionStatus:async(t,a)=>{try{const e=["new","in-progress","resolved"];if(!e.includes(a))throw new Error(`Invalid status. Must be one of: ${e.join(", ")}`);const r=n(o,"contact_submissions",t);await i(r,{status:a})}catch(e){throw e}},updateMembershipApplicationStatus:async(t,a)=>{try{const e=["pending","approved","rejected"];if(!e.includes(a))throw new Error(`Invalid status. Must be one of: ${e.join(", ")}`);const r=n(o,"membership_applications",t);await i(r,{status:a})}catch(e){throw e}},updateAwardsNominationStatus:async(t,a)=>{try{const e=["pending","approved","rejected"];if(!e.includes(a))throw new Error(`Invalid status. Must be one of: ${e.join(", ")}`);const r=n(o,"awards_nominations",t);await i(r,{status:a})}catch(e){throw e}},getContactSubmission:t=>d.find(a=>a.id===t)||null,getMembershipApplication:t=>u.find(a=>a.id===t)||null,getAwardsNomination:t=>m.find(a=>a.id===t)||null,archiveContactSubmission:async t=>{try{const a=n(o,"contact_submissions",t);await i(a,{archived:!0,archived_at:c()})}catch(a){throw a}},unarchiveContactSubmission:async t=>{try{const a=n(o,"contact_submissions",t);await i(a,{archived:!1,archived_at:null})}catch(a){throw a}},archiveMembershipApplication:async t=>{try{const a=n(o,"membership_applications",t);await i(a,{archived:!0,archived_at:c()})}catch(a){throw a}},unarchiveMembershipApplication:async t=>{try{const a=n(o,"membership_applications",t);await i(a,{archived:!1,archived_at:null})}catch(a){throw a}},archiveAwardsNomination:async t=>{try{const a=n(o,"awards_nominations",t);await i(a,{archived:!0,archived_at:c()})}catch(a){throw a}},unarchiveAwardsNomination:async t=>{try{const a=n(o,"awards_nominations",t);await i(a,{archived:!1,archived_at:null})}catch(a){throw a}}}}function u({status:t,className:a=""}){const e={new:{label:"New",bgColor:"bg-primary-light",textColor:"text-secondary",borderColor:"border-primary-light"},"in-progress":{label:"In Progress",bgColor:"bg-yellow-100",textColor:"text-yellow-800",borderColor:"border-yellow-200"},resolved:{label:"Resolved",bgColor:"bg-green-100",textColor:"text-green-800",borderColor:"border-green-200"},pending:{label:"Pending",bgColor:"bg-orange-100",textColor:"text-orange-800",borderColor:"border-orange-200"},approved:{label:"Approved",bgColor:"bg-green-100",textColor:"text-green-800",borderColor:"border-green-200"},rejected:{label:"Rejected",bgColor:"bg-red-100",textColor:"text-red-800",borderColor:"border-red-200"}}[t]||{label:t||"Unknown",bgColor:"bg-gray-100",textColor:"text-gray-800",borderColor:"border-gray-200"};return d.jsx("span",{className:`\n        inline-flex items-center justify-center px-3 py-1 rounded-full text-sm font-medium\n        border ${e.borderColor}\n        ${e.bgColor} ${e.textColor}\n        whitespace-nowrap\n        ${a}\n      `.trim().replace(/\s+/g," "),children:e.label})}export{u as S,l as u};
