import{j as e}from"./ui-vendor-D2jIcmjW.js";import{a as s,S as a,C as t}from"./SEO-CngG18n1.js";import{a0 as r,_ as n,R as i,i as l,t as d,a2 as o,$ as c,Q as m,a3 as u}from"./index-CKJXBgC0.js";import{a as x,c as p,N as g}from"./react-vendor-C9V0vZuX.js";import{u as h}from"./form-vendor-BOV3nkk-.js";function b({onSuccess:s}){const{applyForAdminAccess:a,getMyApplication:t,loading:m}=r(),[u,p]=x.useState(!1),{register:g,handleSubmit:b,formState:{errors:f},reset:j}=h(),y=t();return y?e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex-shrink-0",children:["pending"===y.status&&e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx(n,{className:"w-6 h-6 text-yellow-600 animate-spin"})}),"approved"===y.status&&e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(i,{className:"w-6 h-6 text-green-600"})}),"denied"===y.status&&e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(l,{className:"w-6 h-6 text-red-600"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["pending"===y.status&&"Application Pending Review","approved"===y.status&&"Application Approved","denied"===y.status&&"Application Denied"]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["pending"===y.status&&"Your admin application is being reviewed. You will be notified once a decision is made.","approved"===y.status&&"Congratulations! Your admin application has been approved. You now have admin access.","denied"===y.status&&"Unfortunately, your admin application was not approved at this time."]}),y.reason&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Your Application:"}),e.jsx("p",{className:"text-sm text-gray-600",children:y.reason})]}),y.denial_reason&&e.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-medium text-red-700 mb-1",children:"Reason for Denial:"}),e.jsx("p",{className:"text-sm text-red-600",children:y.denial_reason})]}),y.approved_by&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Approved by: ",y.approved_by]})]})]})}):e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Apply for Admin Access"}),e.jsx("p",{className:"text-gray-600",children:"Request administrative access to manage submissions and applications. Your request will be reviewed by an existing administrator."})]}),e.jsxs("form",{onSubmit:b(async e=>{try{p(!0),await a(e.name,e.reason),c.success("Admin application submitted successfully! An admin will review your request."),j(),s&&s()}catch(t){c.error(t.message||"Failed to submit application. Please try again.")}finally{p(!1)}}),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(d,{className:"inline mr-1 w-4 h-4"}),"Full Name"]}),e.jsx("input",{id:"name",type:"text",...g("name",{required:"Name is required",minLength:{value:2,message:"Name must be at least 2 characters"}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your full name"}),f.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.name.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(l,{className:"inline mr-1 w-4 h-4"}),"Reason for Request"]}),e.jsx("textarea",{id:"reason",rows:6,...g("reason",{required:"Please provide a reason for requesting admin access",minLength:{value:20,message:"Reason must be at least 20 characters"},maxLength:{value:1e3,message:"Reason must be less than 1000 characters"}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Explain why you need admin access and how you will use it responsibly..."}),f.reason&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.reason.message})]}),e.jsx("button",{type:"submit",disabled:u||m,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:u?e.jsxs(e.Fragment,{children:[e.jsx(n,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Submitting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"w-5 h-5"}),e.jsx("span",{children:"Submit Application"})]})})]})]})}function f(){const{currentUser:n,loading:i}=m(),{isAdmin:l,loading:d}=r(),o=p();if(i||d)return e.jsx(u,{fullScreen:!0,text:"Loading..."});if(!n)return e.jsx(g,{to:"/admin/login",replace:!0});if(l)return e.jsx(g,{to:"/admin",replace:!0});return e.jsxs(e.Fragment,{children:[e.jsx(s,{title:"Apply for Admin Access",description:"Request administrative access to the ACBF admin dashboard",noindex:!0}),e.jsx(a,{bgColor:"gray-50",padding:"xl",children:e.jsx(t,{maxWidth:"2xl",children:e.jsx(b,{onSuccess:()=>{o("/admin",{replace:!0})}})})})]})}export{f as default};
