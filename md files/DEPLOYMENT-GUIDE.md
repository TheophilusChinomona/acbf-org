# Phase 1.8 Deployment Guide - cPanel Deployment

**Date:** 2025-01-27  
**Status:** ✅ Ready for Deployment

## Overview

This guide provides step-by-step instructions for deploying the ACBF RSA React application to cPanel hosting.

## Pre-Deployment Checklist

### Before You Start

- [ ] All Phase 1.1-1.7 tasks are complete
- [ ] Site has been tested locally (`npm run dev`)
- [ ] Production build works (`npm run build`)
- [ ] All content has been migrated from WordPress
- [ ] Images are optimized and in place
- [ ] Contact form Formspree ID is configured (if using Formspree)
- [ ] Domain name is ready
- [ ] cPanel access credentials are available
- [ ] Backup of existing WordPress site (if applicable)

## Step 1: Production Build

### 1.1 Generate Sitemap

```bash
cd acbf-rsa-react
npm run generate:sitemap
```

**Important:** Before running, update `scripts/generate-sitemap.js`:
- Change `SITE_URL` to your actual domain (e.g., `https://yourdomain.com`)

### 1.2 Build for Production

```bash
npm run build:prod
```

This will:
- Generate sitemap.xml
- Build optimized production files
- Create `dist` folder with all static files

### 1.3 Verify Build

Check that the `dist` folder contains:
- `index.html`
- `assets/` folder with CSS and JS files
- `sitemap.xml` (in public folder, will be copied to dist)
- All images from `public/assets/`

## Step 2: Prepare Deployment Files

### 2.1 Verify Required Files

Ensure these files are in `public/` folder (will be copied to `dist/`):
- `.htaccess` ✅ (already created)
- `robots.txt` ✅ (already created)
- `sitemap.xml` ✅ (generated by script)

### 2.2 Update Configuration Files

**Update `.htaccess`** (if needed):
- Already configured for React Router
- HTTPS redirect enabled
- Compression enabled
- Caching configured

**Update `robots.txt`**:
- Change `Sitemap: https://yourdomain.com/sitemap.xml` to your actual domain

**Update `scripts/generate-sitemap.js`**:
- Change `SITE_URL` to your actual domain

## Step 3: cPanel Deployment Methods

### Method A: Manual Upload via cPanel File Manager (Recommended for First Deployment)

#### Step 3.1: Access cPanel File Manager

1. Log into your cPanel account
2. Navigate to **File Manager**
3. Open `public_html` folder (or your domain's root folder)

#### Step 3.2: Backup Existing Site

1. Select all files in `public_html`
2. Click **Compress** → Create ZIP backup
3. Download the backup file
4. **Keep this backup safe!**

#### Step 3.3: Clear Old Files

1. Select all WordPress files (if migrating from WordPress)
2. Click **Delete**
3. Confirm deletion
4. **Keep only `.htaccess` if it exists** (we'll replace it)

#### Step 3.4: Upload React Build

1. Navigate to `public_html` folder
2. Click **Upload** button
3. Select all files from your local `dist` folder:
   - `index.html`
   - `assets/` folder (upload as folder)
   - All other files/folders
4. Wait for upload to complete

#### Step 3.5: Upload Configuration Files

1. Upload `.htaccess` file (from `public/.htaccess`)
2. Upload `robots.txt` file (from `public/robots.txt`)
3. Upload `sitemap.xml` file (from `public/sitemap.xml`)

#### Step 3.6: Set File Permissions

Set correct permissions:
- Files: `644`
- Folders: `755`
- `.htaccess`: `644`

### Method B: FTP/SFTP Upload

#### Step 3.1: Get FTP Credentials

1. In cPanel, go to **FTP Accounts**
2. Note your FTP hostname, username, and password
3. Or use your cPanel username and password

#### Step 3.2: Connect with FTP Client

1. Open FileZilla (or similar FTP client)
2. Enter:
   - Host: `ftp.yourdomain.com` or your server IP
   - Username: Your FTP username
   - Password: Your FTP password
   - Port: `21` (FTP) or `22` (SFTP)
3. Click **Quickconnect**

#### Step 3.3: Upload Files

1. Navigate to `public_html` on server
2. Navigate to `dist` folder locally
3. Select all files and folders
4. Drag and drop to `public_html`
5. Wait for upload to complete

#### Step 3.4: Upload Configuration Files

Upload `.htaccess`, `robots.txt`, and `sitemap.xml` separately

### Method C: Git Deployment (Advanced)

#### Step 3.1: Set Up Git in cPanel

1. In cPanel, go to **Git Version Control**
2. Click **Create**
3. Set repository name: `acbf-rsa-react`
4. Set repository path: `/home/username/public_html`
5. Click **Create**

#### Step 3.2: Configure Local Git

```bash
cd acbf-rsa-react
git init
git add .
git commit -m "Initial commit"
```

#### Step 3.3: Add cPanel Remote

```bash
git remote add cpanel ssh://username@yourdomain.com/~/public_html
```

#### Step 3.4: Create Deployment Script

Create `deploy.sh` in project root:

```bash
#!/bin/bash
# Build and deploy script

echo "Building for production..."
npm run build:prod

echo "Copying files..."
cp -r dist/* ~/public_html/

echo "Deployment complete!"
```

#### Step 3.5: Deploy

```bash
git push cpanel main
# Then SSH into server and run deploy.sh
```

## Step 4: Domain Configuration

### 4.1 Verify Domain Settings

1. In cPanel, go to **Domains**
2. Ensure your domain points to `public_html`
3. Check subdomain settings if using any

### 4.2 SSL Certificate Setup

1. In cPanel, go to **SSL/TLS Status**
2. Enable **AutoSSL** (automatic SSL via Let's Encrypt)
3. Wait for certificate to be issued (usually 5-10 minutes)
4. Verify HTTPS is working: `https://yourdomain.com`

### 4.3 Force HTTPS (Already in .htaccess)

The `.htaccess` file already includes HTTPS redirect. Verify it's working.

## Step 5: Post-Deployment Testing

### 5.1 Basic Functionality Tests

- [ ] Homepage loads correctly
- [ ] All navigation links work
- [ ] Blog posts load correctly
- [ ] Portfolio items display correctly
- [ ] Contact page loads
- [ ] Contact form displays (test submission)
- [ ] Search functionality works
- [ ] All pages are accessible

### 5.2 React Router Testing

- [ ] Direct URL access works (e.g., `/blog`, `/portfolio`)
- [ ] Page refresh doesn't show 404
- [ ] Browser back/forward buttons work
- [ ] All routes are accessible

### 5.3 Mobile Responsiveness

- [ ] Test on mobile device
- [ ] Test on tablet
- [ ] Test on desktop (various sizes)
- [ ] Navigation menu works on mobile
- [ ] Forms are usable on mobile

### 5.4 Browser Testing

Test in:
- [ ] Chrome
- [ ] Firefox
- [ ] Safari
- [ ] Edge
- [ ] Mobile browsers

### 5.5 Performance Testing

- [ ] Run Google Lighthouse audit
- [ ] Check Google PageSpeed Insights
- [ ] Verify Core Web Vitals:
  - First Contentful Paint: < 1.5s
  - Largest Contentful Paint: < 2.5s
  - Time to Interactive: < 3.5s
- [ ] Target scores: 90+ on all metrics

### 5.6 SEO Testing

- [ ] Verify meta tags are present (view page source)
- [ ] Check Open Graph tags
- [ ] Verify sitemap.xml is accessible: `https://yourdomain.com/sitemap.xml`
- [ ] Verify robots.txt is accessible: `https://yourdomain.com/robots.txt`
- [ ] Test structured data with Google Rich Results Test

## Step 6: SEO Setup

### 6.1 Google Search Console

1. Go to [Google Search Console](https://search.google.com/search-console)
2. Add your property (domain)
3. Verify ownership (DNS or HTML file method)
4. Submit sitemap: `https://yourdomain.com/sitemap.xml`
5. Monitor for crawl errors

### 6.2 Bing Webmaster Tools

1. Go to [Bing Webmaster Tools](https://www.bing.com/webmasters)
2. Add your site
3. Verify ownership
4. Submit sitemap

### 6.3 Google Analytics (Optional)

1. Create Google Analytics account
2. Get tracking ID (GA4)
3. Add to `index.html` before `</head>`:

```html
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'GA_MEASUREMENT_ID');
</script>
```

### 6.4 Google Tag Manager (Optional)

1. Create GTM account
2. Get container ID
3. Add GTM code to `index.html`

## Step 7: Ongoing Maintenance

### 7.1 Updating Content

**Before Strapi (Phase 1):**
1. Edit JSON files in `src/data/`
2. Rebuild: `npm run build:prod`
3. Upload new `dist` folder to cPanel

**After Strapi (Phase 2):**
1. Log into Strapi admin
2. Edit content
3. Content updates automatically

### 7.2 Updating the Site

1. Make changes locally
2. Test with `npm run dev`
3. Build: `npm run build:prod`
4. Upload `dist` folder to cPanel
5. Clear browser cache
6. Test live site

### 7.3 Regular Backups

- [ ] Backup `dist` folder regularly
- [ ] Backup database (when Phase 2 is implemented)
- [ ] Keep local Git repository updated

## Troubleshooting

### Issue: React Router shows 404 on refresh

**Solution:**
- Verify `.htaccess` is uploaded correctly
- Check that mod_rewrite is enabled in cPanel
- Verify `.htaccess` file permissions (644)

### Issue: Images not loading

**Solution:**
- Check image paths (should be relative: `/assets/images/...`)
- Verify images are in `public/assets/` folder
- Check file permissions (644 for files)

### Issue: Site not updating after upload

**Solution:**
- Clear browser cache (Ctrl+Shift+R)
- Check cPanel File Manager - verify files uploaded
- Verify file timestamps are recent

### Issue: Slow performance

**Solution:**
- Verify production build was used (not dev build)
- Check `.htaccess` compression is enabled
- Optimize images (compress, use WebP)
- Enable CDN (Cloudflare) if available

### Issue: HTTPS not working

**Solution:**
- Check SSL certificate is active in cPanel
- Verify `.htaccess` HTTPS redirect is correct
- Wait for SSL certificate to propagate (can take up to 24 hours)

### Issue: Contact form not working

**Solution:**
- Verify Formspree ID is configured in `ContactForm.jsx`
- Check Formspree account is active
- Test form submission manually
- Check browser console for errors

## Deployment Checklist Summary

### Pre-Deployment
- [x] Production build created
- [x] Sitemap generated
- [x] `.htaccess` configured
- [x] `robots.txt` created
- [x] SEO meta tags implemented
- [x] All content migrated

### Deployment
- [ ] Files uploaded to cPanel
- [ ] `.htaccess` uploaded
- [ ] `robots.txt` uploaded
- [ ] `sitemap.xml` uploaded
- [ ] File permissions set correctly

### Post-Deployment
- [ ] Domain configured
- [ ] SSL certificate active
- [ ] All pages tested
- [ ] Mobile responsiveness verified
- [ ] Performance scores checked
- [ ] SEO setup completed
- [ ] Google Search Console configured
- [ ] Analytics configured (optional)

## Next Steps After Deployment

1. **Monitor Performance:**
   - Check Google Search Console weekly
   - Monitor Core Web Vitals
   - Review analytics data

2. **Content Updates:**
   - Update content as needed
   - Add new blog posts
   - Update portfolio items

3. **Phase 2 Preparation:**
   - When ready, implement Strapi CMS
   - Set up Node.js on cPanel
   - Migrate content to Strapi

## Support Resources

- **cPanel Documentation:** https://docs.cpanel.net/
- **React Router Deployment:** https://reactrouter.com/en/main/start/overview
- **Google Search Console:** https://search.google.com/search-console
- **Lighthouse:** Chrome DevTools → Lighthouse tab

---

**Deployment Status:** ✅ Ready  
**Last Updated:** 2025-01-27

